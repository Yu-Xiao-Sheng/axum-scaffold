
# {{project_name}}

> A modern Axum web application scaffolded with best practices

[![Rust](https://img.shields.io/badge/rust-1.85%2B-orange.svg)](https://www.rust-lang.org)
[![License: MIT/Apache-2.0](https://img.shields.io/badge/license-MIT%2FApache--2.0-blue.svg)]()

Generated by [axum-app-create](https://github.com/Yu-Xiao-Sheng/axum-app-create) v0.1.0

---

## ğŸ“š Table of Contents ç›®å½•

- [Quick Start å¿«é€Ÿå¼€å§‹](#quick-start-å¿«é€Ÿå¼€å§‹)
- [Project Structure é¡¹ç›®ç»“æ„](#project-structure-é¡¹ç›®ç»“æ„)
- [Configuration é…ç½®](#configuration-é…ç½®)
- [Development å¼€å‘](#development-å¼€å‘)
{{#if has_database}}- [Database Setup æ•°æ®åº“è®¾ç½®](#database-setup-æ•°æ®åº“è®¾ç½®){{/if}}
{{#if has_auth}}- [Authentication è®¤è¯](#authentication-è®¤è¯){{/if}}
- [Deployment éƒ¨ç½²](#deployment-éƒ¨ç½²)
- [Next Steps ä¸‹ä¸€æ­¥](#next-steps-ä¸‹ä¸€æ­¥)

---

## ğŸš€ Quick Start å¿«é€Ÿå¼€å§‹

### Prerequisites å‰ç½®è¦æ±‚

- Rust toolchain (1.85+) - Install from [rustup.rs](https://rustup.rs/)
{{#if has_postgresql}}- PostgreSQL 14+ (for production database){{/if}}
{{#if has_sqlite}}- SQLite 3+ (included for development){{/if}}

### English

1. **Clone and navigate**:
   ```bash
   cd {{project_name}}
   ```

2. **Install dependencies**:
   ```bash
   cargo build
   ```

3. **Configure environment**:
   ```bash
   cp .env.example .env
   # Edit .env with your settings
   ```

4. **Run the server**:
   ```bash
   cargo run
   ```

5. **Test the API**:
   ```bash
   # Health check
   curl http://127.0.0.1:8080/health

   # Expected response
   {"status":"ok","version":"0.1.0"}
   ```

### ä¸­æ–‡

1. **è¿›å…¥é¡¹ç›®ç›®å½•**ï¼š
   ```bash
   cd {{project_name}}
   ```

2. **å®‰è£…ä¾èµ–**ï¼š
   ```bash
   cargo build
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®æ‚¨çš„é…ç½®
   ```

4. **å¯åŠ¨æœåŠ¡å™¨**ï¼š
   ```bash
   cargo run
   ```

5. **æµ‹è¯• API**ï¼š
   ```bash
   # å¥åº·æ£€æŸ¥
   curl http://127.0.0.1:8080/health

   # é¢„æœŸå“åº”
   {"status":"ok","version":"0.1.0"}
   ```

---

## ğŸ“ Project Structure é¡¹ç›®ç»“æ„

```text
{{project_name}}/
â”œâ”€â”€ Cargo.toml              # Project dependencies and metadata
â”œâ”€â”€ .env.example            # Environment variables template
â”œâ”€â”€ .gitignore              # Git ignore patterns
â”œâ”€â”€ README.md               # This file
{{#if has_database}}â”œâ”€â”€ migrations/             # Database migrations
{{/if}}{{#if has_biz_error}}â”œâ”€â”€ biz_errors.yaml         # Business error definitions
â”œâ”€â”€ build.rs                # Build script for error code generation
{{/if}}â”‚
â””â”€â”€ src/
    â”œâ”€â”€ main.rs             # Server entry point and router setup
    â”œâ”€â”€ lib.rs              # Library module exports
    â”œâ”€â”€ config.rs           # Configuration and environment variables
    {{#if has_database}}â”œâ”€â”€ db.rs               # Database connection and pool
    {{/if}}â”‚
    â””â”€â”€ handlers/           # API endpoint handlers
        â”œâ”€â”€ health.rs       # GET /health - Health check endpoint
        {{#if has_auth}}â”œâ”€â”€ auth.rs          # POST /auth/register, /auth/login - Authentication
        {{/if}}â””â”€â”€ mod.rs          # Handler module exports
```

### Key Files è¯´æ˜

| File | Description |
|------|-------------|
| `src/main.rs` | Application entry point, server initialization, router setup |
| `src/config.rs` | Environment-based configuration with validation |
| `src/handlers/health.rs` | Health check endpoint for monitoring |
{{#if has_database}}| `src/db.rs` | Database connection pool with SQLx |{{/if}}
{{#if has_auth}}| `src/handlers/auth.rs` | User registration and login endpoints |{{/if}}
{{#if has_biz_error}}| `biz_errors.yaml` | Business error code definitions (i18n) |{{/if}}

---

## âš™ï¸ Configuration é…ç½®

### Environment Variables ç¯å¢ƒå˜é‡

Create a `.env` file in the project root:

```bash
cp .env.example .env
```

#### Available Variables å¯ç”¨å˜é‡

| Variable | Default | Description | Example |
|----------|---------|-------------|---------|
| `HOST` | `127.0.0.1` | Server bind address | `0.0.0.0` for public access |
| `PORT` | `8080` | Server port | `3000`, `8080` |
{{#if has_database}}| `DATABASE_URL` | (required) | Database connection string | `postgresql://user:pass@localhost/db` |
{{/if}}
{{#if has_auth}}| `JWT_SECRET` | (required) | Secret key for JWT tokens | Use `openssl rand -base64 32` |
{{/if}}
| `LOG_LEVEL` | `info` | Logging level | `debug`, `info`, `warn`, `error` |
| `RUST_LOG` | `info` | Trace logging level | `my_app=debug` |

#### Example .env File

```bash
# Server Configuration
HOST=127.0.0.1
PORT=8080

{{#if has_database}}
# Database (choose one)
DATABASE_URL=postgresql://postgres:password@localhost/{{project_name}}
# DATABASE_URL=sqlite://{{project_name}}.db

{{/if}}
{{#if has_auth}}
# Authentication (generate with: openssl rand -base64 32)
JWT_SECRET=your-secret-key-here

{{/if}}
# Logging
LOG_LEVEL=info
RUST_LOG={{project_snake_case}}=info
```

---

## ğŸ› ï¸ Development å¼€å‘

### Running Tests è¿è¡Œæµ‹è¯•

```bash
# Run all tests
cargo test

# Run tests with output
cargo test -- --nocapture

# Run specific test
cargo test test_health_endpoint
```

### Code Formatting ä»£ç æ ¼å¼åŒ–

```bash
# Format code
cargo fmt

# Check formatting
cargo fmt --check
```

### Linting ä»£ç æ£€æŸ¥

```bash
# Run Clippy lints
cargo clippy

# Fix lints automatically
cargo clippy --fix
```

### Documentation æ–‡æ¡£

```bash
# Generate and open documentation
cargo doc --open
```

---

{{#if has_database}}
## ğŸ—„ï¸ Database Setup æ•°æ®åº“è®¾ç½®

### Choosing a Database é€‰æ‹©æ•°æ®åº“

This project supports both PostgreSQL and SQLite:

- **PostgreSQL**: Recommended for production, better concurrency
- **SQLite**: Great for development and small deployments

### PostgreSQL Setup

```bash
# Install PostgreSQL
sudo apt install postgresql  # Debian/Ubuntu
brew install postgresql       # macOS

# Start PostgreSQL service
sudo service postgresql start

# Create database and user
sudo -u postgres createuser --interactive
sudo -u postgres createdb {{project_name}}

# Set DATABASE_URL in .env
DATABASE_URL=postgresql://user:password@localhost/{{project_name}}

# Run migrations
cargo run -- migrate
```

### SQLite Setup (Development)

```bash
# No installation required - SQLite is embedded

# Set DATABASE_URL in .env
DATABASE_URL=sqlite://{{project_name}}.db

# Database file will be created automatically
```

### Running Migrations è¿è¡Œè¿ç§»

```bash
# Apply pending migrations
cargo run -- migrate

# Rollback last migration
cargo run -- migrate rollback
```

---

{{/if}}
{{#if has_auth}}
## ğŸ” Authentication è®¤è¯

### Registration æ³¨å†Œ

```bash
curl -X POST http://127.0.0.1:8080/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "password123"
  }'
```

### Login ç™»å½•

```bash
curl -X POST http://127.0.0.1:8080/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "password123"
  }'
```

Response:
```json
{
  "token": "placeholder_jwt_token",
  "username": "testuser"
}
```

---

{{/if}}
## ğŸš¢ Deployment éƒ¨ç½²

### Building for Release å‘å¸ƒæ„å»º

```bash
# Build optimized binary
cargo build --release

# Binary location
# Linux/macOS: ./target/release/{{project_name}}
# Windows: .\target\release\{{project_name}}.exe
```

### Production Checklist ç”Ÿäº§æ£€æŸ¥æ¸…å•

- [ ] Update `.env` with production values
- [ ] Set strong `JWT_SECRET`{{#if has_auth}} and `DATABASE_URL`{{/if}}
- [ ] Configure reverse proxy (Nginx/Apache)
- [ ] Set up process manager (systemd/supervisord)
- [ ] Enable TLS/HTTPS (Let's Encrypt)
- [ ] Configure database backups{{#if has_postgresql}}
- [ ] Run migrations: `cargo run -- migrate`{{/if}}
- [ ] Set up monitoring and logging

### Docker Deployment (Optional)

```dockerfile
# Example Dockerfile
FROM rust:1.85 as builder
WORKDIR /app
COPY . .
RUN cargo build --release

FROM debian:bookworm-slim
COPY --from=builder /app/target/release/{{project_name}} /usr/local/bin/
EXPOSE 8080
CMD ["{{project_name}}"]
```

---

## ğŸ“– Next Steps ä¸‹ä¸€æ­¥

### Recommended Reading æ¨èé˜…è¯»

- [Axum Documentation](https://docs.rs/axum/)
- [Tokio Runtime](https://tokio.rs/)
- [SQLx Database Toolkit](https://docs.rs/sqlx/){{#if has_database}}
- [PostgreSQL Best Practices](https://wiki.postgresql.org/wiki/Don%27t_Do_This){{/if}}

### Adding Features æ·»åŠ åŠŸèƒ½

1. **Add new endpoints**: Create new files in `src/handlers/`
2. **Add middleware**: Register in `src/main.rs` router
3. **Add database models**: Update `src/db.rs` and create migrations
4. **Add tests**: Create test files in `tests/` directory

### Common Tasks å¸¸è§ä»»åŠ¡

```bash
# Add a new dependency
cargo add serde_json

# Update dependencies
cargo update

# Clean build artifacts
cargo clean

# Check for unused dependencies
cargo +nightly udeps
```

---

## ğŸ“„ License è®¸å¯è¯

This project is open source and available under the MIT or Apache-2.0 license.

æœ¬é¡¹ç›®æ˜¯å¼€æºçš„ï¼Œå¯ä½¿ç”¨ MIT æˆ– Apache-2.0 è®¸å¯è¯ã€‚

---

## ğŸ™ Acknowledgments è‡´è°¢

Built with:
- [Axum](https://github.com/tokio-rs/axum) - Web framework
- [Tokio](https://tokio.rs/) - Async runtime
{{#if has_database}}- [SQLx](https://github.com/launchbadge/sqlx) - Database toolkit{{/if}}
{{#if has_auth}}- [jsonwebtoken](https://github.com/Keats/jsonwebtoken) - JWT library{{/if}}

Generated with â¤ï¸ by [axum-app-create](https://github.com/Yu-Xiao-Sheng/axum-app-create)

**Year**: {{year}}
**Version**: 0.1.0
